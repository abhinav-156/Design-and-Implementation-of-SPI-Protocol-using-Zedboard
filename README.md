# ðŸ§  Design and Implementation of SPI Protocol using Two ZedBoards (Masterâ€“Slave Configuration)

### Indian Institute of Information Technology, Design and Manufacturing, Kurnool  
**Submitted by:** V. Abhinav  
**Roll No:** 523EC0013  
**Department:** Electronics and Communication Engineering  
**Under the Guidance of:** Dr. P. Ranga Babu  

---

## ðŸ“œ Abstract
This project demonstrates the design and implementation of the **Serial Peripheral Interface (SPI) protocol** using **two Digilent ZedBoards**, where one functions as the **Master** and the other as the **Slave**.  
The Master transmits an **8-bit data pattern**, which the Slave receives and displays on its **LEDs**.  
The design is implemented in **Verilog HDL** using **Xilinx Vivado**, ensuring synchronous data transfer, accurate timing control, and FPGA-level hardware interfacing.  
This project validates the fundamental working principle of SPI â€” a fast, full-duplex, synchronous communication protocol â€” using a hardware-based setup.

---

## âš™ï¸ Objectives
- To design **SPI Master and Slave** modules using Verilog HDL.  
- To implement **synchronous serial communication** between two ZedBoards.  
- To transmit **8-bit data** from the Master to the Slave.  
- To visualize received data using **LED patterns**.  
- To verify SPI functionality via **simulation and hardware implementation**.

---

## ðŸ§° Tools Used
- **Software:** Xilinx Vivado Design Suite  
- **Language:** Verilog HDL  
- **Hardware:** Two Digilent ZedBoards (Zynq-7000 SoC)  
- **Accessories:** Jumper wires, breadboard, connecting cables  

---

## ðŸ”Œ Description of SPI Protocol
SPI (Serial Peripheral Interface) is a **four-wire synchronous serial protocol** designed for full-duplex communication between a **Master** and one or more **Slave** devices.

| Signal | Direction | Description |
|:--|:--|:--|
| MOSI | Master â†’ Slave | Transfers data from the Master |
| MISO | Slave â†’ Master | Sends data from the Slave |
| SCLK | Master â†’ Slave | Clock signal generated by the Master |
| SS | Master â†’ Slave | Slave Select (active low) signal |

---

## âš¡ Working Principle of SPI Communication
The SPI communication between the ZedBoards works on a **clock-driven data exchange** mechanism.

1. **Clock Synchronization:**  
   The Master generates the clock (`SCLK`) that controls the timing of data transfers.  
   - SPI Mode 0 (CPOL=0, CPHA=0) used:  
     - Clock idle LOW  
     - Data sampled on rising edge  

2. **Data Transmission:**  
   The Master pulls `SS` low to activate the Slave and shifts data bits out on the `MOSI` line each clock cycle.

3. **Data Reception:**  
   The Slave samples incoming bits and stores them in a shift register.  
   After receiving 8 bits, the full byte is displayed on the Slaveâ€™s LEDs.

4. **Synchronization Logic:**  
   Both Master and Slave are governed by FSMs (Finite State Machines) ensuring deterministic communication:
   - **Master FSM:** IDLE â†’ LOAD â†’ TRANSFER â†’ DONE  
   - **Slave FSM:** IDLE â†’ RECEIVE â†’ DISPLAY  

5. **Timing Considerations:**  
   - Data is **stable before the sampling edge**.  
   - **MOSI updates** on falling edge and **is sampled** on rising edge.

---

## ðŸ”§ Connection Diagram
| Signal | Master (JA Header) | Slave (JA Header) | Direction |
|:--|:--|:--|:--|
| MOSI | JA1 | JA1 | Master â†’ Slave |
| MISO | JA2 | JA2 | Slave â†’ Master |
| SCLK | JA3 | JA3 | Master â†’ Slave |
| SS | JA4 | JA4 | Master â†’ Slave |
| GND | GND | GND | Common Ground |

---

## ðŸ’» Verilog HDL Implementation

### Master Modules
- **Master.v:** Core SPI Master logic (clock generation, shifting, synchronization).  
- **top_spi_master_zedboard.v:** Connects switches, buttons, and PMOD pins to Master logic.  
- **master_tb.v:** Simulates SPI transmission to verify waveform correctness.  
- **master.xdc:** FPGA pin constraints file mapping ZedBoard pins.

### Slave Modules
- **spi_slave.v:** Core SPI Slave logic (data reception and response).  
- **top_spi_slave.v:** Maps received data to LEDs.  
- **slave_tb.v:** Simulates Slave-side communication.  
- **slave.xdc:** ZedBoard pin assignments for LEDs and SPI pins.

---

## ðŸ§© ZedBoard Implementation
The project was synthesized, implemented, and verified on two physical ZedBoards:  
- **Master Board:** Generates SPI clock, sends 8-bit data pattern.  
- **Slave Board:** Receives and displays pattern on LEDs.  

Simulation and hardware testing confirmed accurate bit-level synchronization between MOSI, MISO, SCLK, and SS.

---

## ðŸ“ˆ Results and Discussion
- SPI link between two ZedBoards established successfully.  
- 8-bit data transferred without errors.  
- Slave LEDs displayed received data correctly.  
- Simulation waveforms verified the **synchronous timing** of SPI signals.

---

## âœ… Advantages
- High-speed synchronous data transfer.  
- Full-duplex communication.  
- Simple hardware and scalable to multiple Slaves.  
- Efficient FPGA resource utilization.

---

## ðŸ§¾ Conclusion
The **SPI protocol** was successfully designed, simulated, and implemented using **two ZedBoards** in a **Masterâ€“Slave configuration**.  
The experiment demonstrated reliable data transfer, proper synchronization, and FPGA-based hardware communication, confirming the functionality and efficiency of SPI as a high-speed serial protocol.

---

## ðŸ“š References
1. Digilent ZedBoard Reference Manual  
2. Xilinx Vivado Design Suite User Guide  
3. Motorola SPI Bus Specification  
4. P. P. Chu, *FPGA Prototyping by Verilog Examples*, Wiley Publications

---

## ðŸ“¸ Project Images
- `images/master_board_setup.jpg`  
- `images/slave_board_setup.jpg`  
- https://github.com/abhinav-156/Design-and-Implementation-of-SPI-Protocol-using-Zedboard/blob/main/SPI%20Slave%20waveform.jpg
- https://github.com/abhinav-156/Design-and-Implementation-of-SPI-Protocol-using-Zedboard/blob/main/SPI%20Master%20waveform.jpg

---

## ðŸš€ How to Run
1. Open **Xilinx Vivado** and create a new project.  
2. Add all **Verilog source files** and **constraint files**.  
3. Synthesize â†’ Implement â†’ Generate Bitstream.  
4. Program **ZedBoard 1 (Master)** and **ZedBoard 2 (Slave)**.  
5. Observe 8-bit LED pattern on the Slave board corresponding to the Masterâ€™s switch input.

---

## ðŸ Future Scope
- Extend SPI to **multi-slave** topologies.  
- Integrate with **ADC/DAC** modules.  
- Implement SPI communication in **VHDL** or **SystemVerilog** for advanced timing analysis.

---

> **Author:** [V. Abhinav](https://github.com/)  
> **Institution:** IIITDM Kurnool  
> **Project Title:** *Design and Implementation of SPI Protocol using Two ZedBoards*  
> **License:** MIT License  
